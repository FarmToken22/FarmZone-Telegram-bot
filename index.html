<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name="description" content="FarmZone - A cryptocurrency mining and referral platform">
<title>FarmZone</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<script src="https://cdn.tailwindcss.com"></script>
<style>
*{box-sizing:border-box;margin:0;padding:0}body{font-family:'Inter',-apple-system,BlinkMacSystemFont,'Segoe UI',Arial,sans-serif;overflow-x:hidden;padding-bottom:80px;min-height:100vh;background-color:#f9fafb}::-webkit-scrollbar{width:4px}::-webkit-scrollbar-track{background:#f1f1f1}::-webkit-scrollbar-thumb{background:#888;border-radius:2px}.section{display:none;animation:fadeIn .4s ease}.section.active{display:block}@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.mining-btn{background:linear-gradient(135deg,#28a745,#20c997);color:#fff;font-size:16px;font-weight:bold;border:none;border-radius:50%;width:100px;height:100px;cursor:pointer;box-shadow:0 6px 20px rgba(40,167,69,.4);transition:all .3s ease;touch-action:manipulation;display:flex;flex-direction:column;align-items:center;justify-content:center;line-height:1.3;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.mining-btn:not(:disabled):active{transform:translate(-50%,-50%) scale(.95);box-shadow:0 4px 15px rgba(40,167,69,.3)}.mining-btn:not(:disabled):hover{background:linear-gradient(135deg,#218838,#1aa179);transform:translate(-50%,-50%) scale(1.02)}.mining-btn:disabled{opacity:.6;cursor:not-allowed}.mining-btn.claim{background:linear-gradient(135deg,#ffc107,#ff9800);box-shadow:0 6px 20px rgba(255,193,7,.4);animation:pulse 1.5s infinite}@keyframes pulse{0%,100%{transform:translate(-50%,-50%) scale(1);box-shadow:0 6px 20px rgba(255,193,7,.4)}50%{transform:translate(-50%,-50%) scale(1.05);box-shadow:0 8px 25px rgba(255,193,7,.6)}}.loading{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(255,255,255,.95);display:flex;justify-content:center;align-items:center;z-index:1000}.spinner{width:60px;height:60px;border:5px solid #f3f3f3;border-top:5px solid #28a745;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}.timer-display{font-size:14px;font-weight:600}.earned-display{font-size:10px;margin-top:2px;opacity:.9}.mining-container{position:relative;width:100%;max-width:400px;margin-bottom:1.5rem}.notification{position:fixed;top:20px;right:20px;background:#28a745;color:white;padding:10px 20px;border-radius:8px;box-shadow:0 4px 10px rgba(0,0,0,.2);z-index:1000;opacity:0;transition:opacity .3s ease}.notification.show{opacity:1}.status{font-size:.875rem;margin-top:.5rem;opacity:0;transition:opacity .3s}.status.show{opacity:1}.status.success{color:#28a745}.status.error{color:#dc3545}.mining-status{font-weight:600}.nav-btn{position:relative;display:flex;flex-direction:column;align-items:center;gap:4px;transition:all .3s cubic-bezier(.4,0,.2,1);padding:10px 0}.nav-btn.active{color:#28a745}.menu-dropdown{position:absolute;top:100%;right:0;margin-top:.5rem;background:white;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.15);min-width:200px;opacity:0;visibility:hidden;transform:translateY(-10px);transition:all .3s ease;z-index:100;overflow:hidden}.menu-dropdown.show{opacity:1;visibility:visible;transform:translateY(0)}.menu-close-btn{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;border-bottom:1px solid #e5e7eb;background:linear-gradient(135deg,#28a745 0%,#20c997 100%)}.menu-close-btn span{font-weight:700;color:#fff;font-size:15px;letter-spacing:0.5px;text-transform:uppercase}.menu-close-btn button{width:32px;height:32px;border-radius:8px;background:rgba(255,255,255,0.2);color:#fff;border:2px solid rgba(255,255,255,0.3);cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .25s cubic-bezier(.4,0,.2,1);font-size:20px;font-weight:700;line-height:1;backdrop-filter:blur(10px)}.menu-close-btn button:hover{background:rgba(255,255,255,0.3);border-color:rgba(255,255,255,0.5);transform:rotate(90deg) scale(1.1);box-shadow:0 4px 12px rgba(0,0,0,0.15)}.menu-close-btn button:active{transform:rotate(90deg) scale(0.95)}.menu-dropdown a{display:flex;align-items:center;gap:12px;padding:12px 16px;color:#374151;text-decoration:none;transition:all .2s;border-bottom:1px solid #f3f4f6}.menu-dropdown a:last-child{border-bottom:none}.menu-dropdown a:hover{background:#f9fafb;color:#28a745}.menu-dropdown a svg{width:20px;height:20px;flex-shrink:0}.menu-dropdown a span{font-size:14px;font-weight:500}.menu-overlay{position:fixed;inset:0;background:transparent;z-index:99;display:none}.menu-overlay.show{display:block}#adModal{display:none;position:fixed;z-index:1001;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,.5);justify-content:center;align-items:center}.ad-modal-content{background-color:#fefefe;padding:20px;border-radius:10px;width:90%;max-width:340px;text-align:center;box-shadow:0 10px 30px rgba(0,0,0,.3)}.ad-container{background:linear-gradient(135deg,#f5f7fa 0%,#c3cfe2 100%);border-radius:12px;padding:12px;margin:16px auto;min-height:100px;display:none;align-items:center;justify-content:center;border:1px solid rgba(0,0,0,.05);box-shadow:0 2px 8px rgba(0,0,0,.08);position:relative;transition:opacity .3s ease;max-width:728px}.ad-container.hidden{display:none!important}.ad-container.loaded{display:flex;opacity:1}.ad-label{position:absolute;top:4px;right:8px;font-size:10px;color:rgba(0,0,0,.4);text-transform:uppercase;letter-spacing:.5px;font-weight:500}.telegram-user-info{background:linear-gradient(135deg,#28a745,#20c997);color:white;padding:12px 16px;border-radius:12px;margin:16px;box-shadow:0 4px 12px rgba(40,167,69,.3)}.telegram-user-info p{margin:4px 0;font-size:14px}.telegram-user-info strong{font-weight:600}@media(max-width:640px){.mining-btn{width:90px;height:90px;font-size:14px}.timer-display{font-size:12px}.earned-display{font-size:9px}.nav-text{font-size:11px}.ad-container{min-height:60px;padding:8px}.menu-dropdown{min-width:180px}.ad-modal-content{width:95%;max-width:320px}}
</style>
</head>
<body class="bg-gray-50 min-h-screen flex flex-col">
<script>
// Telegram WebApp Initialization
let tg = window.Telegram.WebApp;
let telegramUser = null;

// Initialize Telegram WebApp
function initTelegramApp() {
  try {
    // Expand to full height
    tg.expand();
    
    // Ready signal
    tg.ready();
    
    // Get user data
    telegramUser = tg.initDataUnsafe?.user || null;
    
    // Apply Telegram theme colors
    if (tg.themeParams) {
      document.documentElement.style.setProperty('--tg-theme-bg-color', tg.themeParams.bg_color || '#ffffff');
      document.documentElement.style.setProperty('--tg-theme-text-color', tg.themeParams.text_color || '#000000');
      document.documentElement.style.setProperty('--tg-theme-hint-color', tg.themeParams.hint_color || '#999999');
      document.documentElement.style.setProperty('--tg-theme-link-color', tg.themeParams.link_color || '#28a745');
      document.documentElement.style.setProperty('--tg-theme-button-color', tg.themeParams.button_color || '#28a745');
      document.documentElement.style.setProperty('--tg-theme-button-text-color', tg.themeParams.button_text_color || '#ffffff');
    }
    
    // Enable closing confirmation
    tg.enableClosingConfirmation();
    
    // Setup MainButton (optional)
    tg.MainButton.setText('Share with Friends');
    tg.MainButton.onClick(() => {
      const shareUrl = `https://t.me/share/url?url=${encodeURIComponent(window.location.href)}&text=${encodeURIComponent('Join FarmZone and start mining!')}`;
      tg.openTelegramLink(shareUrl);
    });
    
    // Show user info if available
    if (telegramUser) {
      displayTelegramUserInfo();
      // Save user to localStorage
      localStorage.setItem('telegram_user', JSON.stringify(telegramUser));
      localStorage.setItem('telegram_user_id', telegramUser.id);
    }
    
    console.log('‚úÖ Telegram WebApp initialized successfully');
    console.log('User:', telegramUser);
    
  } catch (error) {
    console.error('‚ùå Telegram WebApp initialization failed:', error);
  }
}

// Display Telegram user info
function displayTelegramUserInfo() {
  if (!telegramUser) return;
  
  const userInfoDiv = document.createElement('div');
  userInfoDiv.className = 'telegram-user-info';
  userInfoDiv.innerHTML = `
    <p><strong>üë§ User:</strong> ${telegramUser.first_name || ''} ${telegramUser.last_name || ''}</p>
    <p><strong>üÜî ID:</strong> ${telegramUser.id}</p>
    ${telegramUser.username ? `<p><strong>üì± Username:</strong> @${telegramUser.username}</p>` : ''}
  `;
  
  const header = document.querySelector('header');
  if (header) {
    header.after(userInfoDiv);
  }
}

// Send data back to Telegram bot
function sendDataToBot(data) {
  try {
    tg.sendData(JSON.stringify(data));
  } catch (error) {
    console.error('Error sending data to bot:', error);
  }
}

// Show alert using Telegram native alert
function showTelegramAlert(message) {
  tg.showAlert(message);
}

// Show confirm dialog
function showTelegramConfirm(message, callback) {
  tg.showConfirm(message, callback);
}

// Haptic feedback
function hapticFeedback(type = 'medium') {
  if (tg.HapticFeedback) {
    tg.HapticFeedback.impactOccurred(type); // light, medium, heavy, rigid, soft
  }
}

// Initialize on load
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', initTelegramApp);
} else {
  initTelegramApp();
}

// Menu system - Works WITHOUT internet (must be before app.js)
(function(){
const menuIcons=[
{name:'Extra',href:'Extra.html',svg:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v8m-4-4h8M5 12a7 7 0 1114 0 7 7 0 01-14 0z"/></svg>`},
{name:'Connect',href:'Connect.html',svg:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18 8a6 6 0 00-12 0v8a6 6 0 0012 0V8zm-6 9v-4"/></svg>`},
{name:'Settings',href:'Settings.html',svg:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>`},
{name:'Roadmap',href:'Roadmap.html',svg:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5h6l2 6h8l2 6H9l-2-6H3z"/></svg>`},
{name:'Usage Policy',href:'Usage Policy.html',svg:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h10M7 11h10M7 15h6m5 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>`},
{name:'Privacy Policy',href:'Privacy Policy.html',svg:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 11c0-1.105.895-2 2-2h6v8a2 2 0 01-2 2H6a2 2 0 01-2-2V7h8a2 2 0 012 2v2z"/></svg>`}
];

function initMenu(){
const menuDropdown=document.getElementById('menuDropdown');
const menuToggleBtn=document.getElementById('menuToggleBtn');
const menuOverlay=document.getElementById('menuOverlay');

if(!menuDropdown||!menuToggleBtn||!menuOverlay){
console.error('Menu elements not found');
return;
}

// Populate menu with close button
const closeHeader=document.createElement('div');
closeHeader.className='menu-close-btn';
closeHeader.innerHTML='<span>Menu</span><button id="menuCloseBtn" aria-label="Close menu">√ó</button>';
menuDropdown.appendChild(closeHeader);

menuIcons.forEach(item=>{
const link=document.createElement('a');
link.href=item.href;
link.innerHTML=item.svg+'<span>'+item.name+'</span>';
link.addEventListener('click', () => hapticFeedback('light'));
menuDropdown.appendChild(link);
});

// Toggle functionality
menuToggleBtn.addEventListener('click',function(e){
e.preventDefault();
e.stopPropagation();
hapticFeedback('medium');
const isShown=menuDropdown.classList.contains('show');
if(isShown){
menuDropdown.classList.remove('show');
menuOverlay.classList.remove('show');
}else{
menuDropdown.classList.add('show');
menuOverlay.classList.add('show');
}
});

// Close button handler
const closeBtn=document.getElementById('menuCloseBtn');
if(closeBtn){
closeBtn.addEventListener('click',function(e){
e.preventDefault();
e.stopPropagation();
hapticFeedback('light');
menuDropdown.classList.remove('show');
menuOverlay.classList.remove('show');
});
}

// Close on overlay click
menuOverlay.addEventListener('click',function(e){
e.stopPropagation();
menuDropdown.classList.remove('show');
menuOverlay.classList.remove('show');
});

console.log('‚úÖ Menu initialized successfully');
}

// Initialize immediately or on DOM ready
if(document.readyState==='loading'){
document.addEventListener('DOMContentLoaded',initMenu);
}else{
initMenu();
}
})();

// Enhanced button clicks with haptic feedback
document.addEventListener('click', function(e) {
  if (e.target.matches('button') || e.target.closest('button')) {
    hapticFeedback('light');
  }
});
</script>

<!-- Loading Indicator -->
<div id="loading" class="loading"><div class="spinner"></div></div>

<!-- Notification System -->
<div id="notification" class="notification"></div>

<!-- Ad Modal -->
<div id="adModal"><div class="ad-modal-content"><p class="mb-3 text-gray-700 font-semibold">üéâ Thank you for your activity!</p><div id="claimAd" style="min-height:90px;display:flex;align-items:center;justify-content:center"></div><button id="adCloseBtn" class="mt-4 bg-red-500 text-white px-6 py-2 rounded-lg hover:bg-red-600 transition-colors">Close</button></div></div>

<!-- Menu Overlay -->
<div id="menuOverlay" class="menu-overlay"></div>

<!-- Header (Static) -->
<header class="flex items-center justify-between px-4 py-3 shadow bg-white sticky top-0 z-10">
<div class="flex items-center gap-2">
<img src="Logo.png" alt="FarmZone Logo" class="h-10 w-10 object-contain" onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><circle cx=%2250%22 cy=%2250%22 r=%2240%22 fill=%22%2328a745%22/></svg>'">
<h1 class="text-xl sm:text-2xl font-bold text-red-600">FarmZone</h1>
</div>
<div class="flex items-center gap-2 sm:gap-3 relative">
<button id="bonusBtn" class="p-2 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full hover:from-yellow-500 hover:to-orange-600 transition-all duration-300 transform hover:scale-110 shadow-lg">
<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v13m0-13V6a2 2 0 112 2h-2zm0 0V5.5A2.5 2.5 0 109.5 8H12zm-7 4h14M5 12a2 2 0 110-4h14a2 2 0 110 4M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/></svg>
</button>
<button id="menuToggleBtn" class="p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition-all duration-300 transform hover:scale-110 shadow">
<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-gray-700" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></svg>
</button>
<div id="menuDropdown" class="menu-dropdown"></div>
</div>
</header>

<!-- Ad Container -->
<div id="mainAdContainer" class="ad-container hidden">
<span class="ad-label">Advertisement</span>
<div id="mainAdContent"></div>
</div>

<!-- Dynamic Section Containers (JS will populate these) -->
<div id="homeSection" class="section active"></div>
<div id="profileSection" class="section"></div>
<div id="walletSection" class="section"></div>
<div id="bonusSection" class="section"></div>

<!-- Footer Navigation (Static Structure) -->
<footer class="fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t border-gray-200 z-20">
<div class="relative max-w-lg mx-auto">
<div class="flex justify-around">
<button id="homeBtn" class="nav-btn active text-green-600 flex-1 relative">
<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/></svg>
<span class="nav-text text-xs">Home</span>
</button>
<button id="profileBtn" class="nav-btn text-gray-600 flex-1 relative">
<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/></svg>
<span class="nav-text text-xs">Profile</span>
</button>
<button id="walletBtn" class="nav-btn text-gray-600 flex-1 relative">
<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/></svg>
<span class="nav-text text-xs">Wallet</span>
</button>
</div>
</div>
</footer>

<!-- JS Module Imports - These will dynamically render all sections -->
<script type="module" src="app.js"></script>
<script type="module" src="home.js"></script>
<script type="module" src="profile.js"></script>
<script type="module" src="wallet.js"></script>
<script type="module" src="bonus.js"></script>

</body>
</html>